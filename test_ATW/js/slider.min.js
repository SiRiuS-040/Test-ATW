const popupSlider=document.querySelector(".picture-popup"),popupSliderClose=document.querySelector(".picture-popup__button-close"),popupSliderOpen=document.querySelector(".gallery__image"),popupSliderOpenArr=document.querySelectorAll(".gallery__image"),overlay=document.querySelector(".overlay"),imageArray=document.querySelectorAll(".gallery__image"),imageWrapper=document.querySelector(".picture-popup__image-wrapper"),list=carousel.querySelector(".gallery__list"),listElems=carousel.querySelectorAll(".gallery__item"),carouselPrev=document.querySelector(".carousel__control--prev"),carouselNext=document.querySelector(".carousel__control--next"),popupImagePrev=document.querySelector(".picture-popup__control--prev"),popupImageNext=document.querySelector(".picture-popup__control--next"),imageCounter=document.querySelector(".picture-popup__counter"),width=157,count=1,isEscapeKey=e=>"Escape"===e.key;let position=0;function setImageUrl(e){if(e.target!=list){let t=e.target.getAttribute("src");imageWrapper.style.backgroundImage=" url('."+t+" '"}}carouselPrev.addEventListener("click",(()=>{position+=157,position=Math.min(position,0),list.style.marginLeft=position+"px"})),carouselNext.addEventListener("click",(()=>{position-=157,position=Math.max(position,-157*(listElems.length-1)),list.style.marginLeft=position+"px"}));const showPopupSlide=()=>{overlay.classList.add("overlay--active"),popupSlider.classList.add("picture-popup--active");const e=e=>{isEscapeKey(e)&&(overlay.classList.remove("overlay--active"),popupSlider.classList.remove("picture-popup--active"))};overlay.addEventListener("click",(t=>{"popup-addnote"!=t.target.className&&(overlay.classList.remove("overlay--active"),popupSlider.classList.remove("picture-popup--active"),document.removeEventListener("keydown",e))}),{once:!0}),document.addEventListener("keydown",e,{once:!0}),popupSliderClose.addEventListener("click",(()=>{overlay.classList.remove("overlay--active"),popupSlider.classList.remove("picture-popup--active"),document.removeEventListener("keydown",e)}),{once:!0})};function targetTest(e){console.log(e.target)}let imageIndex=0;const getimageItemIndex=e=>{let t=e.target.parentNode.parentNode,r=e.target.parentNode.parentNode.parentNode,o=Array.prototype.indexOf.call(r.children,t);return imageIndex=o};function setImagePrev(){0==imageIndex&&(imageIndex=imageArray.length),imageWrapper.style.backgroundImage=" url('."+imageArray[imageIndex-1].getAttribute("src")+" '",imageIndex--}function setImageNext(){imageIndex>=imageArray.length-1&&(imageIndex=-1),imageWrapper.style.backgroundImage=" url('."+imageArray[imageIndex+1].getAttribute("src")+" '",imageIndex++}function setImageCounter(){imageCounter.textContent=imageIndex+1+"  /  "+imageArray.length}popupSliderOpenArr.forEach((e=>{e.addEventListener("click",(e=>{getimageItemIndex(e),setImageCounter(),list.addEventListener("click",setImageUrl,!1),showPopupSlide()}))})),popupImagePrev.addEventListener("click",(()=>{setImagePrev(),setImageCounter()})),popupImageNext.addEventListener("click",(()=>{setImageNext(),setImageCounter()}));